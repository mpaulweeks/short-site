{"version":3,"sources":["common.tsx","VideoPreview.tsx","App.tsx","index.tsx","../../utils/dist/tools.js","../../utils/dist/video.js","../../utils/dist/index.js","../../utils/dist/amy.js","../../utils/dist/auth.js","../../utils/dist/database.js","../../utils/dist/store.js","../../utils/dist/vimeoClient.js"],"names":["FlexColumnMixin","Container","styled","a","_templateObject","PreviewContainer","div","_templateObject2","DetailsContainer","_templateObject3","TitleRow","_templateObject4","Duration","_templateObject5","VideoPreview","_React$Component","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","duration","props","video","data","minutes","Math","floor","toString","seconds","padStart","concat","react_default","createElement","href","url","src","imgUrl","name","formatDuration","React","Component","App_templateObject","VideosContainer","App_templateObject2","App","_getPrototypeOf2","_this","_len","length","args","Array","_key","call","state","fetchVideos","_fetchVideos","asyncToGenerator","regenerator_default","mark","_callee","resp","wrap","_context","prev","next","console","log","process","REACT_APP_IS_DEV","fetch","sent","json","setState","db","Database","stop","App_Container","getVideos","map","v","VideoPreview_VideoPreview","ReactDOM","render","App_App","document","getElementById","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","e","rejected","result","done","then","__generator","body","f","y","t","g","_","label","trys","ops","verb","throw","return","Symbol","iterator","n","op","TypeError","pop","push","defineProperty","exports","sortObjs","arr","callback","sorted","sort","b","valA","valB","asyncMap","array","output","index","_a","Video","fromVimeo","link","description","pictures","sizes","created_at","release_time","__export","m","p","hasOwnProperty","__webpack_require__","__importDefault","mod","__esModule","default","node_fetch_1","node_html_parser_1","filmBaseUrls","blackList","isFilmAnchor","aTag","some","baseUrl","attributes","includes","isNotInBlacklist","isLinkToFullFilm","innerHTML","scrapeAmy","root","anchorTags","filmLinks","text","parse","querySelectorAll","filter","md5_1","verifyPassword","password","NODE_ENV","PUBLIC_URL","ADMIN_PASSWORD","tools_1","video_1","file","videos","vd","lookup","reduce","obj","blacklist","prototype","addVideo","keys","k","reverse","toJson","JSON","stringify","makeEmpty","fs_1","Store","uploadDB","IS_DEV","writeFile","error","vimeo_1","VimeoClient","client","Vimeo","VIMEO_CLIENT_ID","VIMEO_CLIENT_SECRET","VIMEO_ACCESS_TOKEN","get","id","split","request","path","status_code","headers"],"mappings":"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","file":"static/js/main.7f3485fe.chunk.js","sourcesContent":["export const FlexColumnMixin = `\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: no-wrap;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Video } from 'short-site-utils';\nimport { FlexColumnMixin } from './common';\n\nconst Container = styled.a`\n  border-radius: 0.5rem 0.5rem 0px 0px;\n  width: 400px;\n  height: 350px;\n  margin: 16px;\n  overflow: hidden;\n  text-decoration: none;\n\n  ${FlexColumnMixin}\n\n  --foreground: black;\n  --background: white;\n`;\n\nconst PreviewContainer = styled.div`\n  width: 100%;\n  flex: 1;\n\n  ${FlexColumnMixin}\n\n  & img {\n    height: 100%;\n    min-width: 100%;\n  }\n`;\nconst DetailsContainer = styled.div`\n  height: 8rem;\n  width: 100%;\n  border-radius: 0px 0px 0.5rem 0.5rem;\n  border: 1px solid black;\n  border-top-width: 0px;\n  box-sizing: border-box;\n\n  ${FlexColumnMixin}\n\n  color: var(--foreground);\n  background-color: var(--background);\n\n  &:hover {\n    color: var(--background);\n    background-color: var(--foreground);\n  }\n`;\nconst TitleRow = styled.div`\n  font-size: 1.5em;\n  font-weight: bold;\n  flex: 1;\n\n  ${FlexColumnMixin}\n`;\nconst Duration = styled.div`\n  height: 3rem;\n\n  ${FlexColumnMixin}\n`;\n\ninterface Props {\n  video: Video;\n};\n\nexport class VideoPreview extends React.Component<Props> {\n  formatDuration() {\n    const { duration } = this.props.video.data;\n    const minutes = Math.floor(duration / 60).toString();\n    const seconds = (duration % 60).toString().padStart(2, '0');\n    return `${minutes}:${seconds}`;\n  }\n  render() {\n    const { video } = this.props;\n    return (\n      <Container href={video.data.url}>\n        <PreviewContainer>\n          <img src={video.data.imgUrl} />\n        </PreviewContainer>\n        <DetailsContainer>\n          <TitleRow>\n            {video.data.name}\n          </TitleRow>\n          <Duration>\n            {this.formatDuration()}\n          </Duration>\n        </DetailsContainer>\n      </Container>\n    )\n  }\n}\n","import { Database } from 'short-site-utils';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { VideoPreview } from './VideoPreview';\n\nconst Container = styled.div`\n  text-align: center;\n\n  h1 {\n    text-decoration: underline;\n  }\n`;\nconst VideosContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: wrap;\n`;\n\ninterface Props { }\ninterface State {\n  db?: Database;\n};\n\nexport class App extends React.Component<Props, State> {\n  state: State = {};\n\n  componentDidMount() {\n    this.fetchVideos();\n  }\n  async fetchVideos() {\n    console.log(process.env);\n    const url = process.env.REACT_APP_IS_DEV ? 'http://localhost:8080/db.json' : 'db.json';\n    const resp = await fetch(url);\n    const data = await resp.json();\n    this.setState({\n      db: new Database(data),\n    });\n  }\n  render() {\n    const { db } = this.state;\n    return (\n      <Container>\n        <h1>short stockpile</h1>\n        <div> wip </div>\n        {db ? (\n          <VideosContainer>\n            {db.getVideos().map(v => (\n              <VideoPreview key={v.data.url} video={v} />\n            ))}\n          </VideosContainer>\n        ) : (\n            'loading...'\n          )}\n      </Container>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction sortObjs(arr, callback) {\n  function compare(a, b) {\n    var valA = callback(a);\n    var valB = callback(b);\n\n    if (valA > valB) {\n      return 1;\n    } else if (valA < valB) {\n      return -1;\n    }\n\n    return 0;\n  }\n\n  var sorted = arr.concat();\n  sorted.sort(compare);\n  return sorted;\n}\n\nexports.sortObjs = sortObjs;\n\nfunction asyncMap(array, callback) {\n  return __awaiter(this, void 0, void 0, function () {\n    var output, index, result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          output = [];\n          index = 0;\n          _a.label = 1;\n\n        case 1:\n          if (!(index < array.length)) return [3\n          /*break*/\n          , 4];\n          return [4\n          /*yield*/\n          , callback(array[index], index, array)];\n\n        case 2:\n          result = _a.sent();\n          output.push(result);\n          _a.label = 3;\n\n        case 3:\n          index++;\n          return [3\n          /*break*/\n          , 1];\n\n        case 4:\n          return [2\n          /*return*/\n          , output];\n      }\n    });\n  });\n}\n\nexports.asyncMap = asyncMap;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Video =\n/** @class */\nfunction () {\n  function Video(data) {\n    this.data = data;\n  }\n\n  Video.fromVimeo = function (data) {\n    return new Video({\n      url: data.link,\n      name: data.name,\n      description: data.description,\n      imgUrl: data.pictures.sizes.concat().pop().link,\n      duration: data.duration,\n      created_at: data.release_time\n    });\n  };\n\n  return Video;\n}();\n\nexports.Video = Video;","\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__export(require(\"./amy\"));\n\n__export(require(\"./auth\"));\n\n__export(require(\"./database\"));\n\n__export(require(\"./store\"));\n\n__export(require(\"./tools\"));\n\n__export(require(\"./video\"));\n\n__export(require(\"./vimeoClient\"));","\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nvar _this = this;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar node_fetch_1 = __importDefault(require(\"node-fetch\"));\n\nvar node_html_parser_1 = __importDefault(require(\"node-html-parser\"));\n\nvar filmBaseUrls = ['vimeo.com', 'youtube.com', 'youtu.be', 'filmfreeway.com'];\nvar blackList = [];\n\nvar isFilmAnchor = function isFilmAnchor(aTag) {\n  return filmBaseUrls.some(function (baseUrl) {\n    return (aTag.attributes.href || '').includes(baseUrl);\n  });\n};\n\nvar isNotInBlacklist = function isNotInBlacklist(aTag) {\n  return !blackList.some(function (baseUrl) {\n    return (aTag.attributes.href || '').includes(baseUrl);\n  });\n};\n\nvar isLinkToFullFilm = function isLinkToFullFilm(aTag) {\n  return aTag.innerHTML.includes('strong');\n};\n\nexports.scrapeAmy = function () {\n  return __awaiter(_this, void 0, void 0, function () {\n    var resp, body, root, anchorTags, filmLinks, result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4\n          /*yield*/\n          , node_fetch_1.default('https://amyjxu.me/bookmarks')];\n\n        case 1:\n          resp = _a.sent();\n          return [4\n          /*yield*/\n          , resp.text()];\n\n        case 2:\n          body = _a.sent();\n          root = node_html_parser_1.default.parse(body);\n          anchorTags = root.querySelectorAll('a');\n          filmLinks = anchorTags.filter(isFilmAnchor).filter(isNotInBlacklist).filter(isLinkToFullFilm);\n          result = filmLinks.map(function (a) {\n            return a.attributes.href;\n          });\n          return [2\n          /*return*/\n          , result];\n      }\n    });\n  });\n};","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar md5_1 = __importDefault(require(\"md5\"));\n\nfunction verifyPassword(password) {\n  var hash = md5_1.default(password);\n  return hash === process.env.ADMIN_PASSWORD;\n}\n\nexports.verifyPassword = verifyPassword;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tools_1 = require(\"./tools\");\n\nvar video_1 = require(\"./video\");\n\n;\n\nvar Database =\n/** @class */\nfunction () {\n  function Database(file) {\n    var videos = file.videos.map(function (vd) {\n      return new video_1.Video(vd);\n    });\n    this.lookup = videos.reduce(function (obj, v) {\n      obj[v.data.url] = v;\n      return obj;\n    }, {});\n    this.blacklist = file.blacklist;\n  }\n\n  Database.prototype.addVideo = function (video) {\n    var key = video.data.url;\n\n    if (!this.lookup[key] && !this.blacklist.includes(key)) {\n      this.lookup[key] = video;\n    }\n  };\n\n  Database.prototype.getVideos = function () {\n    var lookup = this.lookup;\n    var videos = Object.keys(lookup).map(function (k) {\n      return lookup[k];\n    });\n    return tools_1.sortObjs(videos, function (v) {\n      return v.data.created_at;\n    }).reverse();\n  };\n\n  Database.prototype.toJson = function () {\n    var data = {\n      videos: this.getVideos().map(function (v) {\n        return v.data;\n      }),\n      blacklist: this.blacklist\n    };\n    return JSON.stringify(data, null, 2);\n  };\n\n  Database.makeEmpty = function () {\n    return new Database({\n      videos: [],\n      blacklist: []\n    });\n  };\n\n  return Database;\n}();\n\nexports.Database = Database;","\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar fs_1 = __importDefault(require(\"fs\"));\n\nvar Store =\n/** @class */\nfunction () {\n  function Store() {}\n\n  Store.prototype.uploadDB = function (db) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , new Promise(function (resolve, reject) {\n          if (process.env.IS_DEV) {\n            fs_1.default.writeFile(\"../../local/db.json\", db.toJson(), function (error) {\n              if (error) {\n                console.log('Failed to save db locally:', error);\n                reject(error);\n              } else {\n                console.log('Saved db locally');\n                resolve();\n              }\n            });\n          }\n        })];\n      });\n    });\n  };\n\n  return Store;\n}();\n\nexports.Store = Store;","\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar vimeo_1 = __importDefault(require(\"vimeo\"));\n\nvar VimeoClient =\n/** @class */\nfunction () {\n  function VimeoClient() {\n    this.client = new vimeo_1.default.Vimeo(process.env.VIMEO_CLIENT_ID, process.env.VIMEO_CLIENT_SECRET, process.env.VIMEO_ACCESS_TOKEN);\n  }\n\n  VimeoClient.prototype.get = function (url) {\n    return __awaiter(this, void 0, void 0, function () {\n      var id, resp;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!url.includes('vimeo.com')) {\n              return [2\n              /*return*/\n              , null];\n            }\n\n            id = url.split('vimeo.com/')[1].split('/')[0].split('?')[0];\n            resp = new Promise(function (resolve, reject) {\n              _this.client.request({\n                path: \"/videos/\" + id\n              }, function (error, body, status_code, headers) {\n                if (error) {\n                  resolve(error);\n                } else {\n                  resolve(body);\n                }\n              });\n            });\n            return [4\n            /*yield*/\n            , resp];\n\n          case 1:\n            return [2\n            /*return*/\n            , _a.sent()];\n        }\n      });\n    });\n  };\n\n  return VimeoClient;\n}();\n\nexports.VimeoClient = VimeoClient;"],"sourceRoot":""}