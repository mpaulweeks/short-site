(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,n,e){"use strict";var r=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(n){a(n)}}function u(t){try{c(r.throw(t))}catch(n){a(n)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},o=this&&this.__generator||function(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(t,i)}catch(u){a=[6,u],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.sortObjs=function(t,n){var e=t.concat();return e.sort(function(t,e){var r=n(t),o=n(e);return r>o?1:r<o?-1:0}),e},n.asyncMap=function(t,n){return r(this,void 0,void 0,function(){var e,r,a;return o(this,function(o){switch(o.label){case 0:e=[],r=0,o.label=1;case 1:return r<t.length?[4,n(t[r],r,t)]:[3,4];case 2:a=o.sent(),e.push(a),o.label=3;case 3:return r++,[3,1];case 4:return[2,e]}})})},n.notEmpty=function(t){return null!==t&&void 0!==t}},17:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t){this.data=t}return t.fromVimeo=function(n){return n?new t({url:n.link,name:n.name,description:n.description,imgUrl:n.pictures.sizes.concat().pop().link,duration:n.duration,created_at:n.release_time}):null},t}();n.Video=r},18:function(t,n,e){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(e(30)),r(e(34)),r(e(16)),r(e(17))},22:function(t,n,e){t.exports=e(41)},30:function(t,n,e){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(31));n.verifyPassword=function(t){return o.default(t)===Object({NODE_ENV:"production",PUBLIC_URL:"."}).ADMIN_PASSWORD}},34:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(16),o=e(17),a=function(){function t(t){var n=t.videos.map(function(t){return new o.Video(t)});this.lookup=n.reduce(function(t,n){return t[n.data.url]=n,t},{}),this.blacklist=t.blacklist}return t.prototype.addVideo=function(t){var n=t.data.url;this.lookup[n]||this.blacklist.includes(n)||(this.lookup[n]=t)},t.prototype.getVideos=function(){var t=this.lookup,n=Object.keys(t).map(function(n){return t[n]});return r.sortObjs(n,function(t){return t.data.created_at}).reverse()},t.prototype.toJson=function(){var t={videos:this.getVideos().map(function(t){return t.data}),blacklist:this.blacklist};return JSON.stringify(t,null,2)},t.makeEmpty=function(){return new t({videos:[],blacklist:[]})},t}();n.Database=a},40:function(t,n,e){},41:function(t,n,e){"use strict";e.r(n);var r=e(0),o=e.n(r),a=e(7),i=e.n(a),u=e(3),c=e.n(u),s=e(6),l=e(4),f=e(5),d=e(9),p=e(8),h=e(10),b=e(1),v=e(18),m=e(2),y="\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: no-wrap;\n";function g(){var t=Object(b.a)(["\n  height: 3rem;\n\n  ","\n"]);return g=function(){return t},t}function w(){var t=Object(b.a)(["\n  font-size: 1.5em;\n  font-weight: bold;\n  flex: 1;\n\n  ","\n"]);return w=function(){return t},t}function k(){var t=Object(b.a)(["\n  height: 8rem;\n  width: 100%;\n  border-radius: 0px 0px 0.5rem 0.5rem;\n  border: 1px solid black;\n  border-top-width: 0px;\n  box-sizing: border-box;\n\n  ","\n\n  color: var(--foreground);\n  background-color: var(--background);\n\n  &:hover {\n    color: var(--background);\n    background-color: var(--foreground);\n  }\n"]);return k=function(){return t},t}function O(){var t=Object(b.a)(["\n  width: 100%;\n  flex: 1;\n\n  ","\n\n  & img {\n    height: 100%;\n    min-width: 100%;\n  }\n"]);return O=function(){return t},t}function j(){var t=Object(b.a)(["\n  border-radius: 0.5rem 0.5rem 0px 0px;\n  width: 400px;\n  height: 350px;\n  margin: 16px;\n  overflow: hidden;\n  text-decoration: none;\n\n  ","\n\n  --foreground: black;\n  --background: white;\n"]);return j=function(){return t},t}var x=m.a.a(j(),y),_=m.a.div(O(),y),E=m.a.div(k(),y),P=m.a.div(w(),y),V=m.a.div(g(),y),D=function(t){function n(){return Object(l.a)(this,n),Object(d.a)(this,Object(p.a)(n).apply(this,arguments))}return Object(h.a)(n,t),Object(f.a)(n,[{key:"formatDuration",value:function(){var t=this.props.video.data.duration,n=Math.floor(t/60).toString(),e=(t%60).toString().padStart(2,"0");return"".concat(n,":").concat(e)}},{key:"render",value:function(){var t=this.props.video;return o.a.createElement(x,{href:t.data.url},o.a.createElement(_,null,o.a.createElement("img",{src:t.data.imgUrl})),o.a.createElement(E,null,o.a.createElement(P,null,t.data.name),o.a.createElement(V,null,this.formatDuration())))}}]),n}(o.a.Component),S="https://us-central1-shortstockpile.cloudfunctions.net/short-site-api",M="http://localhost:3001",N=function(){function t(){Object(l.a)(this,t),this.base=void 0,this.base=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_IS_DEV?M:S}return Object(f.a)(t,[{key:"fetch",value:function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(){var t=Object(s.a)(c.a.mark(function t(n){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.base+n);case 2:if(!(e=t.sent).ok){t.next=9;break}return t.next=6,e.json();case 6:return t.abrupt("return",t.sent);case 9:throw"Error fetching";case 10:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}())},{key:"ping",value:function(){var t=Object(s.a)(c.a.mark(function t(){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("/ping");case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}();function U(){var t=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]);return U=function(){return t},t}function C(){var t=Object(b.a)(["\n  text-align: center;\n\n  h1 {\n    text-decoration: underline;\n  }\n"]);return C=function(){return t},t}var I=m.a.div(C()),L=m.a.div(U()),R=function(t){function n(t){var e;return Object(l.a)(this,n),(e=Object(d.a)(this,Object(p.a)(n).call(this,t))).state={},e.api=void 0,e.api=new N,e}return Object(h.a)(n,t),Object(f.a)(n,[{key:"componentDidMount",value:function(){this.fetchVideos()}},{key:"fetchVideos",value:function(){var t=Object(s.a)(c.a.mark(function t(){var n,e,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"."})),n=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_IS_DEV?"http://localhost:8080/db.json":"https://storage.googleapis.com/shortstockpile.com/db.json",t.next=4,fetch(n);case 4:return e=t.sent,t.next=7,e.json();case 7:r=t.sent,this.setState({db:new v.Database(r)});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,n=this.state.db;return o.a.createElement(I,null,o.a.createElement("h1",null,"short stockpile"),o.a.createElement("div",{onClick:function(){return t.api.ping()}}," wip "),n?o.a.createElement(L,null,n.getVideos().map(function(t){return o.a.createElement(D,{key:t.data.url,video:t})})):"loading...")}}]),n}(o.a.Component);e(40);i.a.render(o.a.createElement(R,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.c4336f7b.chunk.js.map