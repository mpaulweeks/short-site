(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,n,e){"use strict";var r=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))(function(a,o){function i(t){try{c(r.next(t))}catch(n){o(n)}}function u(t){try{c(r.throw(t))}catch(n){o(n)}}function c(t){t.done?a(t.value):new e(function(n){n(t.value)}).then(i,u)}c((r=r.apply(t,n||[])).next())})},a=this&&this.__generator||function(t,n){var e,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(t,i)}catch(u){o=[6,u],r=0}finally{e=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.sortObjs=function(t,n){var e=t.concat();return e.sort(function(t,e){var r=n(t),a=n(e);return r>a?1:r<a?-1:0}),e},n.asyncMap=function(t,n){return r(this,void 0,void 0,function(){var e,r,o;return a(this,function(a){switch(a.label){case 0:e=[],r=0,a.label=1;case 1:return r<t.length?[4,n(t[r],r,t)]:[3,4];case 2:o=a.sent(),e.push(o),a.label=3;case 3:return r++,[3,1];case 4:return[2,e]}})})},n.notEmpty=function(t){return null!==t&&void 0!==t}},17:function(t,n,e){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),function(t){t.Vimeo="vimeo",t.YouTube="youtube"}(r=n.VideoHost||(n.VideoHost={}));var a=function(){function t(t){this.data=t}return t.prototype.displayHost=function(){switch(this.data.host){case r.Vimeo:return"Vimeo";case r.YouTube:return"YouTube";default:return"???"}},t.prototype.displayDuration=function(){var t=this.data.duration;return Math.floor(t/60).toString()+":"+(t%60).toString().padStart(2,"0")},t.now=function(){return(new Date).toISOString().substring(0,10)},t.fromVimeo=function(n,e){return e?new t({key:n,host:r.Vimeo,url:e.link,name:e.name,description:e.description,imgUrl:e.pictures.sizes.concat().pop().link,duration:e.duration,published_at:e.release_time.substring(0,10),created_at:this.now()}):null},t}();n.Video=a},18:function(t,n,e){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),r(e(31)),r(e(35)),r(e(16)),r(e(17))},23:function(t,n,e){t.exports=e(42)},31:function(t,n,e){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(32));n.verifyPassword=function(t){return a.default(t)===Object({NODE_ENV:"production",PUBLIC_URL:"."}).ADMIN_PASSWORD}},35:function(t,n,e){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var a in n=arguments[e])Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);return t}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var a=e(16),o=e(17),i={sortCallback:function(t){return t.data.key},reverse:!1};var u=function(){function t(t){var n=t.videos.map(function(t){return new o.Video(t)});this.lookup=n.reduce(function(t,n){return t[n.data.key]=n,t},{}),this.blacklist=t.blacklist}return t.prototype.addVideo=function(t){var n=t.data.key;this.lookup[n]||this.blacklist.includes(n)||(this.lookup[n]=t)},t.prototype.getVideos=function(t){var n=this.lookup,e=function(t){var n=r({},i);return Object.keys(i).forEach(function(e){t&&void 0!==t[e]&&(n[e]=t[e])}),n}(t),o=Object.keys(n).map(function(t){return n[t]}),u=a.sortObjs(o,e.sortCallback);return e.reverse?u.reverse():u},t.prototype.contains=function(t){return!!this.lookup[t]},t.prototype.toJson=function(){var t={videos:this.getVideos().map(function(t){return t.data}),blacklist:this.blacklist};return JSON.stringify(t,null,2)},t.makeEmpty=function(){return new t({videos:[],blacklist:[]})},t}();n.Database=u},41:function(t,n,e){},42:function(t,n,e){"use strict";e.r(n);var r=e(0),a=e.n(r),o=e(7),i=e.n(o),u=e(21),c=e(3),s=e.n(c),l=e(6),f=e(4),p=e(5),d=e(9),h=e(8),b=e(10),v=e(1),m=e(18),y=e(2),g="\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: no-wrap;\n";function w(){var t=Object(v.a)(["\n  font-family: monospace;\n  font-weight: bold;\n  font-size: 1.5rem;\n\n  ","\n"]);return w=function(){return t},t}function k(){var t=Object(v.a)(["\n  font-style: italic;\n  text-align: left;\n\n  ","\n"]);return k=function(){return t},t}function O(){var t=Object(v.a)(["\n  width: 100%;\n  height: 3rem;\n\n  ","\n  flex-direction: row;\n  justify-content: space-between;\n"]);return O=function(){return t},t}function j(){var t=Object(v.a)(["\n  font-size: 1.5rem;\n  font-weight: bold;\n  flex: 1;\n\n  ","\n"]);return j=function(){return t},t}function E(){var t=Object(v.a)(["\n  height: 8rem;\n  width: 100%;\n  padding: 0px 1em;\n  border-radius: 0px 0px 0.5rem 0.5rem;\n  box-sizing: border-box;\n\n  ","\n\n  color: var(--foreground);\n  background-color: var(--background);\n"]);return E=function(){return t},t}function _(){var t=Object(v.a)(["\n  width: 100%;\n  flex: 1;\n\n  ","\n\n  & img {\n    height: 100%;\n    min-width: 100%;\n  }\n"]);return _=function(){return t},t}function x(){var t=Object(v.a)(["\n  border-radius: 0.5rem 0.5rem 0px 0px;\n  width: 400px;\n  height: 350px;\n  margin: 16px;\n  overflow: hidden;\n  text-decoration: none;\n\n  ","\n\n  --foreground: black;\n  --background: white;\n  &:hover {\n    --foreground: white;\n    --background: black;\n  }\n"]);return x=function(){return t},t}var S=y.a.a(x(),g),P=y.a.div(_(),g),V=y.a.div(E(),g),C=y.a.div(j(),g),D=y.a.div(O(),g),N=y.a.div(k(),g),L=y.a.div(w(),g),M=function(t){function n(){return Object(f.a)(this,n),Object(d.a)(this,Object(h.a)(n).apply(this,arguments))}return Object(b.a)(n,t),Object(p.a)(n,[{key:"render",value:function(){var t=this.props.video;return a.a.createElement(S,{href:t.data.url},a.a.createElement(P,null,a.a.createElement("img",{src:t.data.imgUrl})),a.a.createElement(V,null,a.a.createElement(C,null,t.data.name),a.a.createElement(D,null,a.a.createElement(N,null,"Published on ",t.displayHost(),a.a.createElement("br",null),t.data.published_at),a.a.createElement(L,null,t.displayDuration()))))}}]),n}(a.a.Component),U="https://us-central1-shortstockpile.cloudfunctions.net/short-site-api",I="http://localhost:3001",A=function(){function t(){Object(f.a)(this,t),this.base=void 0,this.base=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_IS_DEV?I:U}return Object(p.a)(t,[{key:"fetch",value:function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(){var t=Object(l.a)(s.a.mark(function t(n){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.base+n);case 2:if(!(e=t.sent).ok){t.next=9;break}return t.next=6,e.json();case 6:return t.abrupt("return",t.sent);case 9:throw"Error fetching";case 10:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}())},{key:"ping",value:function(){var t=Object(l.a)(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch("/ping");case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}();function R(){var t=Object(v.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]);return R=function(){return t},t}function F(){var t=Object(v.a)(["\n  & > * {\n    margin: 0px 0.5rem;\n  }\n"]);return F=function(){return t},t}function T(){var t=Object(v.a)(["\n  padding: 2rem;\n  h1 {\n    font-size: 3rem;\n    margin: 0px;\n  }\n"]);return T=function(){return t},t}function z(){var t=Object(v.a)(["\n  text-align: center;\n\n  color: #FFFFFF;\n  background-color: #333333;\n"]);return z=function(){return t},t}var B=y.a.div(z()),H=y.a.div(T()),J=y.a.div(F()),K=y.a.div(R()),Y=function(t){function n(t){var e;return Object(f.a)(this,n),(e=Object(d.a)(this,Object(h.a)(n).call(this,t))).state={sortOptionKey:"pubNew"},e.api=void 0,e.sortOptions={alpha:{sortCallback:function(t){return t.data.name},reverse:!1},lenShort:{sortCallback:function(t){return t.data.duration},reverse:!1},lenLong:{sortCallback:function(t){return t.data.duration},reverse:!0},pubNew:{sortCallback:function(t){return t.data.published_at},reverse:!0},pubOld:{sortCallback:function(t){return t.data.published_at},reverse:!1}},e.api=new A,e}return Object(b.a)(n,t),Object(p.a)(n,[{key:"componentDidMount",value:function(){this.fetchVideos()}},{key:"fetchVideos",value:function(){var t=Object(l.a)(s.a.mark(function t(){var n,e,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"."})),n=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_IS_DEV?"http://localhost:8080/db.json":"https://storage.googleapis.com/shortstockpile.com/db.json",t.next=4,fetch(n);case 4:return e=t.sent,t.next=7,e.json();case 7:r=t.sent,this.setState({db:new m.Database(r)});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"onChangeSort",value:function(t){this.setState({sortOptionKey:t.target.value})}},{key:"render",value:function(){var t=this,n=this.state,e=n.db,r=n.sortOptionKey,o=e&&e.getVideos(Object(u.a)({},this.sortOptions[r]||{}));return a.a.createElement(B,null,a.a.createElement(H,null,a.a.createElement("h1",null,"short stockpile"),a.a.createElement("div",{onClick:function(){return t.api.ping()}}," work in progress by @mpaulweeks ")),a.a.createElement(J,null,a.a.createElement("span",null,"Sort by:"),a.a.createElement("select",{onChange:function(n){return t.onChangeSort(n)}},a.a.createElement("option",{value:"pubNew"},"Published date, Newest"),a.a.createElement("option",{value:"pubOld"},"Published date, Oldest"),a.a.createElement("option",{value:"alpha"},"Alphabetic"),a.a.createElement("option",{value:"lenShort"},"Duration, Shortest"),a.a.createElement("option",{value:"lenLong"},"Duration, Longest"))),o?a.a.createElement(K,null,o.map(function(t){return a.a.createElement(M,{key:t.data.url,video:t})})):"loading...")}}]),n}(a.a.Component);e(41);i.a.render(a.a.createElement(Y,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.8f900659.chunk.js.map