(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(n,t,e){"use strict";var r=this&&this.__awaiter||function(n,t,e,r){return new(e||(e=Promise))(function(o,a){function i(n){try{c(r.next(n))}catch(t){a(t)}}function u(n){try{c(r.throw(n))}catch(t){a(t)}}function c(n){n.done?o(n.value):new e(function(t){t(n.value)}).then(i,u)}c((r=r.apply(n,t||[])).next())})},o=this&&this.__generator||function(n,t){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(n,i)}catch(u){a=[6,u],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.sortObjs=function(n,t){var e=n.concat();return e.sort(function(n,e){var r=t(n),o=t(e);return r>o?1:r<o?-1:0}),e},t.asyncMap=function(n,t){return r(this,void 0,void 0,function(){var e,r,a;return o(this,function(o){switch(o.label){case 0:e=[],r=0,o.label=1;case 1:return r<n.length?[4,t(n[r],r,n)]:[3,4];case 2:a=o.sent(),e.push(a),o.label=3;case 3:return r++,[3,1];case 4:return[2,e]}})})},t.notEmpty=function(n){return null!==n&&void 0!==n}},17:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function n(n){this.data=n}return n.fromVimeo=function(t){return t?new n({url:t.link,name:t.name,description:t.description,imgUrl:t.pictures.sizes.concat().pop().link,duration:t.duration,created_at:t.release_time}):null},n}();t.Video=r},18:function(n,t,e){"use strict";function r(n){for(var e in n)t.hasOwnProperty(e)||(t[e]=n[e])}Object.defineProperty(t,"__esModule",{value:!0}),r(e(30)),r(e(34)),r(e(16)),r(e(17))},22:function(n,t,e){n.exports=e(41)},30:function(n,t,e){"use strict";var r=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(e(31));t.verifyPassword=function(n){return o.default(n)===Object({NODE_ENV:"production",PUBLIC_URL:"."}).ADMIN_PASSWORD}},34:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(16),o=e(17),a=function(){function n(n){var t=n.videos.map(function(n){return new o.Video(n)});this.lookup=t.reduce(function(n,t){return n[t.data.url]=t,n},{}),this.blacklist=n.blacklist}return n.prototype.addVideo=function(n){var t=n.data.url;this.lookup[t]||this.blacklist.includes(t)||(this.lookup[t]=n)},n.prototype.getVideos=function(){var n=this.lookup,t=Object.keys(n).map(function(t){return n[t]});return r.sortObjs(t,function(n){return n.data.created_at}).reverse()},n.prototype.contains=function(n){return!!this.lookup[n]},n.prototype.toJson=function(){var n={videos:this.getVideos().map(function(n){return n.data}),blacklist:this.blacklist};return JSON.stringify(n,null,2)},n.makeEmpty=function(){return new n({videos:[],blacklist:[]})},n}();t.Database=a},40:function(n,t,e){},41:function(n,t,e){"use strict";e.r(t);var r=e(0),o=e.n(r),a=e(7),i=e.n(a),u=e(3),c=e.n(u),s=e(6),l=e(4),f=e(5),d=e(9),p=e(8),h=e(10),b=e(1),v=e(18),m=e(2),g="\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: no-wrap;\n";function y(){var n=Object(b.a)(["\n  height: 3rem;\n  font-size: 1.5rem;\n  font-family: monospace;\n  font-weight: bold;\n\n  ","\n\n  align-self: flex-end;\n"]);return y=function(){return n},n}function k(){var n=Object(b.a)(["\n  font-size: 1.5rem;\n  font-weight: bold;\n  flex: 1;\n\n  ","\n"]);return k=function(){return n},n}function w(){var n=Object(b.a)(["\n  height: 8rem;\n  width: 100%;\n  padding: 0px 1em;\n  border-radius: 0px 0px 0.5rem 0.5rem;\n  border: 1px solid black;\n  border-top-width: 0px;\n  box-sizing: border-box;\n\n  ","\n\n  color: var(--foreground);\n  background-color: var(--background);\n\n  &:hover {\n    color: var(--background);\n    background-color: var(--foreground);\n  }\n"]);return w=function(){return n},n}function O(){var n=Object(b.a)(["\n  width: 100%;\n  flex: 1;\n\n  ","\n\n  & img {\n    height: 100%;\n    min-width: 100%;\n  }\n"]);return O=function(){return n},n}function j(){var n=Object(b.a)(["\n  border-radius: 0.5rem 0.5rem 0px 0px;\n  width: 400px;\n  height: 350px;\n  margin: 16px;\n  overflow: hidden;\n  text-decoration: none;\n\n  ","\n\n  --foreground: black;\n  --background: white;\n"]);return j=function(){return n},n}var x=m.a.a(j(),g),_=m.a.div(O(),g),E=m.a.div(w(),g),P=m.a.div(k(),g),V=m.a.div(y(),g),D=function(n){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,n),Object(f.a)(t,[{key:"formatDuration",value:function(){var n=this.props.video.data.duration,t=Math.floor(n/60).toString(),e=(n%60).toString().padStart(2,"0");return"".concat(t,":").concat(e)}},{key:"render",value:function(){var n=this.props.video;return o.a.createElement(x,{href:n.data.url},o.a.createElement(_,null,o.a.createElement("img",{src:n.data.imgUrl})),o.a.createElement(E,null,o.a.createElement(P,null,n.data.name),o.a.createElement(V,null,this.formatDuration())))}}]),t}(o.a.Component),S="https://us-central1-shortstockpile.cloudfunctions.net/short-site-api",M="http://localhost:3001",N=function(){function n(){Object(l.a)(this,n),this.base=void 0,this.base=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_IS_DEV?M:S}return Object(f.a)(n,[{key:"fetch",value:function(n){function t(t){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(){var n=Object(s.a)(c.a.mark(function n(t){var e;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(this.base+t);case 2:if(!(e=n.sent).ok){n.next=9;break}return n.next=6,e.json();case 6:return n.abrupt("return",n.sent);case 9:throw"Error fetching";case 10:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}())},{key:"ping",value:function(){var n=Object(s.a)(c.a.mark(function n(){var t;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.fetch("/ping");case 2:t=n.sent,console.log(t);case 4:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()}]),n}();function U(){var n=Object(b.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]);return U=function(){return n},n}function C(){var n=Object(b.a)(["\n  padding: 2rem;\n  h1 {\n    font-size: 3rem;\n    margin: 0px;\n  }\n"]);return C=function(){return n},n}function I(){var n=Object(b.a)(["\n  text-align: center;\n\n  color: #FFFFFF;\n  background-color: #333333;\n"]);return I=function(){return n},n}var L=m.a.div(I()),R=m.a.div(C()),A=m.a.div(U()),F=function(n){function t(n){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this,n))).state={},e.api=void 0,e.api=new N,e}return Object(h.a)(t,n),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.fetchVideos()}},{key:"fetchVideos",value:function(){var n=Object(s.a)(c.a.mark(function n(){var t,e,r;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"."})),t=Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_IS_DEV?"http://localhost:8080/db.json":"https://storage.googleapis.com/shortstockpile.com/db.json",n.next=4,fetch(t);case 4:return e=n.sent,n.next=7,e.json();case 7:r=n.sent,this.setState({db:new v.Database(r)});case 9:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()},{key:"render",value:function(){var n=this,t=this.state.db;return o.a.createElement(L,null,o.a.createElement(R,null,o.a.createElement("h1",null,"short stockpile"),o.a.createElement("div",{onClick:function(){return n.api.ping()}}," work in progress by @mpaulweeks ")),t?o.a.createElement(A,null,t.getVideos().map(function(n){return o.a.createElement(D,{key:n.data.url,video:n})})):"loading...")}}]),t}(o.a.Component);e(40);i.a.render(o.a.createElement(F,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.eafad36c.chunk.js.map